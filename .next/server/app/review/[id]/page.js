(()=>{var e={};e.id=536,e.ids=[536],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},7261:e=>{"use strict";e.exports=require("node:util")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},289:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c}),r(5934),r(3658),r(3840),r(5866);var a=r(3191),i=r(8716),n=r(7922),s=r.n(n),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["review",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5934)),"/Users/hyungseokcho/ai-video-gen-front/src/app/review/[id]/page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,3658)),"/Users/hyungseokcho/ai-video-gen-front/src/app/layout.jsx"],loading:[()=>Promise.resolve().then(r.bind(r,3840)),"/Users/hyungseokcho/ai-video-gen-front/src/app/loading.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/hyungseokcho/ai-video-gen-front/src/app/review/[id]/page.jsx"],u="/review/[id]/page",h={require:r,loadChunk:()=>Promise.resolve()},f=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/review/[id]/page",pathname:"/review/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9637:(e,t,r)=>{Promise.resolve().then(r.bind(r,8981))},8550:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(7765),i=r(9164),n=r(6562);async function s(e,t,r,s,o,l,c=!1,d=!1,u=[],h,f){let g="http://localhost:8000",m=[],p=[],b=[],x=[],v=[],y=n.Z.get("auth-token");if(d){let t=u?await (0,i.g)(u[0],e):null;t&&b.push(t.url)}else{let e=l.map(async e=>fetch(`${g}/image/remove-background`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({url:e,content_type:"image/jpeg"})}).then(e=>{if(!e.ok)throw Error("Failed to remove background");return e.json()}));(await Promise.all(e)).forEach(e=>{b.push(e.url),u.push(e.image_id)})}let _=h.filter(e=>!0===e.has_product),w=0,j=_.map(async(e,t)=>{let r=u[w],i=a.DS.encode(b[w]);w=(w+1)%u.length;try{let t=await fetch(`${g}/image/generate-product-image?prompt=${e.image_script}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({url_base64:i,no_bg_image_id:r,script_id:f})});if(!t.ok)throw Error(`Failed to generate background for scene ${e.scene}`);let a=await t.json();return a.sceneNumber=e.scene,a.has_product=e.has_product,a}catch(t){throw console.error(`Error in background generation for scene ${e.scene}:`,t),t}});return(await Promise.all(j)).forEach(e=>{e&&e.url&&e.image_id&&e.sceneNumber&&!0===e.has_product&&(m.push(e.url),p.push(e.image_id),x.push(e.sceneNumber),v.push(e.has_product))}),{final_images:m,imageIds:p,bgRemovedImageIds:u,sceneNumbers:x,hasProducts:v}}},3532:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(326),i=r(7577),n=r(9040);let s=(0,i.forwardRef)(({title:e,message:t,outerClassName:r="",titleClassName:s="",onCancel:o,children:l,isLoading:c=!1},d)=>{let[u,h]=(0,i.useState)(!1);return((0,i.useImperativeHandle)(d,()=>({showModal:()=>h(!0),closeModal:()=>h(!1)})),u)?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:`flex flex-col flex-wrap bg-[#2A2A2A] py-3 px-5 rounded shadow-lg ${r}`,children:[(0,a.jsxs)("div",{className:"flex justify-between w-full mb-5 h-[50px]",children:[a.jsx("h2",{className:`text-4xl text-[#DEDEDE] font-semibold self-end ${s}`,children:e}),a.jsx("button",{onClick:()=>{o(),h(!1)},className:"text-white px-2 py-2 rounded self-start",children:a.jsx("img",{src:"/images/X.svg",width:12,height:12,alt:"close icon"})})]}),c?a.jsx(n.Z,{}):(0,a.jsxs)(a.Fragment,{children:[t&&a.jsx("p",{className:"mb-4",children:t}),l]})]})}):null});s.displayName="Modal";let o=s},2673:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(326),i=r(7577),n=r(2401);let s=({children:e,direction:t="horizontal",...r})=>{let[s,o]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e=requestAnimationFrame(()=>o(!0));return()=>{cancelAnimationFrame(e),o(!1)}},[]),s)?a.jsx(n.bK,{...r,direction:t,children:e}):null}},9164:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var a=r(6562);let i=async(e,t)=>{let r=a.Z.get("auth-token"),i=await fetch(`http://localhost:8000/db/get-image/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});return await i.json()}},8981:(e,t,r)=>{"use strict";r.d(t,{default:()=>B});var a=r(326),i=r(7577),n=r(5047),s=r(2401),o=r(3532),l=r(2673),c=r(1324),d=r(6226);r(7611);var u=r(8550);r(9164);var h=r(8728),f=r(2843);async function g(e,t,r,a,i,n,s,o,l,d){let u=process.env.BASE_URL??"http://localhost:8000",h=await (0,c.Ef)(e),f=e.sub;return await fetch(`${u}/video/generate-final-video`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({voice:t,input:r,bg_music_prompt:i,bg_duration:n,fontsize:s,subtitle_color:o,script_id:a,user_id:f,image_prompts:l,image_urls:d})})}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(6562);var p=/^\s+/,b=/\s+$/;function x(e,t){if(t=t||{},(e=e||"")instanceof x)return e;if(!(this instanceof x))return new x(e,t);var r,a,i,n,s,o,l,c,d,u,h,f,g,v,y,_,w,j,M,k,N=(a={r:0,g:0,b:0},i=1,n=null,s=null,o=null,l=!1,c=!1,"string"==typeof(r=e)&&(r=function(e){e=e.replace(p,"").replace(b,"").toLowerCase();var t,r=!1;if(E[e])e=E[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=D.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=D.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=D.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=D.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=D.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=D.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=D.hex8.exec(e))?{r:Z(t[1]),g:Z(t[2]),b:Z(t[3]),a:Z(t[4])/255,format:r?"name":"hex8"}:(t=D.hex6.exec(e))?{r:Z(t[1]),g:Z(t[2]),b:Z(t[3]),format:r?"name":"hex"}:(t=D.hex4.exec(e))?{r:Z(t[1]+""+t[1]),g:Z(t[2]+""+t[2]),b:Z(t[3]+""+t[3]),a:Z(t[4]+""+t[4])/255,format:r?"name":"hex8"}:!!(t=D.hex3.exec(e))&&{r:Z(t[1]+""+t[1]),g:Z(t[2]+""+t[2]),b:Z(t[3]+""+t[3]),format:r?"name":"hex"}}(r)),"object"==m(r)&&(L(r.r)&&L(r.g)&&L(r.b)?(d=r.r,u=r.g,h=r.b,a={r:255*T(d,255),g:255*T(u,255),b:255*T(h,255)},l=!0,c="%"===String(r.r).substr(-1)?"prgb":"rgb"):L(r.h)&&L(r.s)&&L(r.v)?(n=J(r.s),s=J(r.v),f=r.h,g=n,v=s,f=6*T(f,360),g=T(g,100),v=T(v,100),y=Math.floor(f),_=f-y,w=v*(1-g),j=v*(1-_*g),M=v*(1-(1-_)*g),a={r:255*[v,j,w,w,M,v][k=y%6],g:255*[M,v,v,j,w,w][k],b:255*[w,w,M,v,v,j][k]},l=!0,c="hsv"):L(r.h)&&L(r.s)&&L(r.l)&&(n=J(r.s),o=J(r.l),a=function(e,t,r){var a,i,n;function s(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(e=T(e,360),t=T(t,100),r=T(r,100),0===t)a=i=n=r;else{var o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;a=s(l,o,e+1/3),i=s(l,o,e),n=s(l,o,e-1/3)}return{r:255*a,g:255*i,b:255*n}}(r.h,n,o),l=!0,c="hsl"),r.hasOwnProperty("a")&&(i=r.a)),i=z(i),{ok:l,format:r.format||c,r:Math.min(255,Math.max(a.r,0)),g:Math.min(255,Math.max(a.g,0)),b:Math.min(255,Math.max(a.b,0)),a:i});this._originalInput=e,this._r=N.r,this._g=N.g,this._b=N.b,this._a=N.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||N.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=N.ok}function v(e,t,r){var a,i,n=Math.max(e=T(e,255),t=T(t,255),r=T(r,255)),s=Math.min(e,t,r),o=(n+s)/2;if(n==s)a=i=0;else{var l=n-s;switch(i=o>.5?l/(2-n-s):l/(n+s),n){case e:a=(t-r)/l+(t<r?6:0);break;case t:a=(r-e)/l+2;break;case r:a=(e-t)/l+4}a/=6}return{h:a,s:i,l:o}}function y(e,t,r){var a,i,n=Math.max(e=T(e,255),t=T(t,255),r=T(r,255)),s=Math.min(e,t,r),o=n-s;if(i=0===n?0:o/n,n==s)a=0;else{switch(n){case e:a=(t-r)/o+(t<r?6:0);break;case t:a=(r-e)/o+2;break;case r:a=(e-t)/o+4}a/=6}return{h:a,s:i,v:n}}function _(e,t,r,a){var i=[O(Math.round(e).toString(16)),O(Math.round(t).toString(16)),O(Math.round(r).toString(16))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function w(e,t,r,a){return[O(U(a)),O(Math.round(e).toString(16)),O(Math.round(t).toString(16)),O(Math.round(r).toString(16))].join("")}function j(e,t){t=0===t?0:t||10;var r=x(e).toHsl();return r.s-=t/100,r.s=$(r.s),x(r)}function M(e,t){t=0===t?0:t||10;var r=x(e).toHsl();return r.s+=t/100,r.s=$(r.s),x(r)}function k(e){return x(e).desaturate(100)}function N(e,t){t=0===t?0:t||10;var r=x(e).toHsl();return r.l+=t/100,r.l=$(r.l),x(r)}function S(e,t){t=0===t?0:t||10;var r=x(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-(t/100*255)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-(t/100*255)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-(t/100*255)))),x(r)}function A(e,t){t=0===t?0:t||10;var r=x(e).toHsl();return r.l-=t/100,r.l=$(r.l),x(r)}function C(e,t){var r=x(e).toHsl(),a=(r.h+t)%360;return r.h=a<0?360+a:a,x(r)}function I(e){var t=x(e).toHsl();return t.h=(t.h+180)%360,x(t)}function P(e,t){if(isNaN(t)||t<=0)throw Error("Argument to polyad must be a positive number");for(var r=x(e).toHsl(),a=[x(e)],i=360/t,n=1;n<t;n++)a.push(x({h:(r.h+n*i)%360,s:r.s,l:r.l}));return a}function R(e){var t=x(e).toHsl(),r=t.h;return[x(e),x({h:(r+72)%360,s:t.s,l:t.l}),x({h:(r+216)%360,s:t.s,l:t.l})]}function F(e,t,r){t=t||6,r=r||30;var a=x(e).toHsl(),i=360/r,n=[x(e)];for(a.h=(a.h-(i*t>>1)+720)%360;--t;)a.h=(a.h+i)%360,n.push(x(a));return n}function q(e,t){t=t||6;for(var r=x(e).toHsv(),a=r.h,i=r.s,n=r.v,s=[],o=1/t;t--;)s.push(x({h:a,s:i,v:n})),n=(n+o)%1;return s}x.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,r,a=this.toRgb();return e=a.r/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*((t=a.g/255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*((r=a.b/255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=z(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=y(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=y(this._r,this._g,this._b),t=Math.round(360*e.h),r=Math.round(100*e.s),a=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+a+"%)":"hsva("+t+", "+r+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=v(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=v(this._r,this._g,this._b),t=Math.round(360*e.h),r=Math.round(100*e.s),a=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+a+"%)":"hsla("+t+", "+r+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return _(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var t,r,a,i,n;return t=this._r,r=this._g,a=this._b,i=this._a,n=[O(Math.round(t).toString(16)),O(Math.round(r).toString(16)),O(Math.round(a).toString(16)),O(U(i))],e&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)&&n[3].charAt(0)==n[3].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*T(this._r,255))+"%",g:Math.round(100*T(this._g,255))+"%",b:Math.round(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*T(this._r,255))+"%, "+Math.round(100*T(this._g,255))+"%, "+Math.round(100*T(this._b,255))+"%)":"rgba("+Math.round(100*T(this._r,255))+"%, "+Math.round(100*T(this._g,255))+"%, "+Math.round(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(H[_(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+w(this._r,this._g,this._b,this._a),r=t,a=this._gradientType?"GradientType = 1, ":"";if(e){var i=x(e);r="#"+w(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,a=this._a<1&&this._a>=0;return!t&&a&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return x(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(N,arguments)},brighten:function(){return this._applyModification(S,arguments)},darken:function(){return this._applyModification(A,arguments)},desaturate:function(){return this._applyModification(j,arguments)},saturate:function(){return this._applyModification(M,arguments)},greyscale:function(){return this._applyModification(k,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(I,arguments)},monochromatic:function(){return this._applyCombination(q,arguments)},splitcomplement:function(){return this._applyCombination(R,arguments)},triad:function(){return this._applyCombination(P,[3])},tetrad:function(){return this._applyCombination(P,[4])}},x.fromRatio=function(e,t){if("object"==m(e)){var r={};for(var a in e)e.hasOwnProperty(a)&&("a"===a?r[a]=e[a]:r[a]=J(e[a]));e=r}return x(e,t)},x.equals=function(e,t){return!!e&&!!t&&x(e).toRgbString()==x(t).toRgbString()},x.random=function(){return x.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},x.mix=function(e,t,r){r=0===r?0:r||50;var a=x(e).toRgb(),i=x(t).toRgb(),n=r/100;return x({r:(i.r-a.r)*n+a.r,g:(i.g-a.g)*n+a.g,b:(i.b-a.b)*n+a.b,a:(i.a-a.a)*n+a.a})},x.readability=function(e,t){var r=x(e),a=x(t);return(Math.max(r.getLuminance(),a.getLuminance())+.05)/(Math.min(r.getLuminance(),a.getLuminance())+.05)},x.isReadable=function(e,t,r){var a,i,n,s,o,l=x.readability(e,t);switch(o=!1,(i=((a=(a=r)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(a.size||"small").toLowerCase(),"AA"!==i&&"AAA"!==i&&(i="AA"),"small"!==n&&"large"!==n&&(n="small"),s={level:i,size:n}).level+s.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},x.mostReadable=function(e,t,r){var a,i,n,s,o=null,l=0;i=(r=r||{}).includeFallbackColors,n=r.level,s=r.size;for(var c=0;c<t.length;c++)(a=x.readability(e,t[c]))>l&&(l=a,o=x(t[c]));return x.isReadable(e,o,{level:n,size:s})||!i?o:(r.includeFallbackColors=!1,x.mostReadable(e,["#fff","#000"],r))};var E=x.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},H=x.hexNames=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}(E);function z(e){return(isNaN(e=parseFloat(e))||e<0||e>1)&&(e=1),e}function T(e,t){"string"==typeof(r=e)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(e="100%");var r,a,i="string"==typeof(a=e)&&-1!=a.indexOf("%");return(e=Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),1e-6>Math.abs(e-t))?1:e%t/parseFloat(t)}function $(e){return Math.min(1,Math.max(0,e))}function Z(e){return parseInt(e,16)}function O(e){return 1==e.length?"0"+e:""+e}function J(e){return e<=1&&(e=100*e+"%"),e}function U(e){return Math.round(255*parseFloat(e)).toString(16)}var D=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",r="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:RegExp("rgb"+t),rgba:RegExp("rgba"+r),hsl:RegExp("hsl"+t),hsla:RegExp("hsla"+r),hsv:RegExp("hsv"+t),hsva:RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function L(e){return!!D.CSS_UNIT.exec(e)}function B({params:e}){let[t,r]=(0,i.useState)(null),[c,m]=(0,i.useState)([]),[p,b]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),[_,w]=(0,i.useState)([]),[j,M]=(0,i.useState)(null),[k,N]=(0,i.useState)(""),[S,A]=(0,i.useState)(""),[C,I]=(0,i.useState)([]),[P,R]=(0,i.useState)([]),[F,q]=(0,i.useState)(""),[E,H]=(0,i.useState)(""),z=(0,i.useRef)(null),T=(0,i.useRef)(null),$=(0,i.useRef)(null),[Z,O]=(0,i.useState)(!1),J=(0,n.useRouter)(),[U,D]=(0,i.useState)(""),[L,B]=(0,i.useState)(""),G=(0,i.useRef)(null),[X,Y]=(0,i.useState)(!1),{user:W}=(0,h.a)(),[Q,V]=(0,i.useState)(""),[K,ee]=(0,i.useState)(""),[et,er]=(0,i.useState)(0),[ea,ei]=(0,i.useState)(""),[en,es]=(0,i.useState)([]),[eo,el]=(0,i.useState)(en[0]),[ec,ed]=(0,i.useState)(0);(0,n.usePathname)();let eu=e=>x(e).toRgbString();en.map(e=>eu(e)),W||(alert("User login required"),J.push("/"));let eh=e=>{let{name:t,value:a,font:i,color:n,size:s}=e.target;r(e=>({...e,[t]:a})),ee(n),er(s),"dubbingScript"===t&&q(a)},ef=e=>{A(e.title),$.current.closeModal()},{userId:eg}=(0,f.v)();if((0,i.useRef)(!1),!t)return a.jsx("div",{children:"Loading..."});let{id:em}=t,ep=e=>{m(t=>t.filter((t,r)=>r!==e)),w(t=>t.filter((t,r)=>r!==e)),y(t=>t.filter((t,r)=>r!==e))},eb=e=>{M(e),H(c[e]?.image_script),z.current.showModal()},ex=()=>{w(e=>e.map((e,t)=>t===j?!e:e)),z.current.closeModal()},ev=async()=>{let e;if(!0===v[j]){let t=await (0,u.Z)("1","1","1",E,[p[j]],!1,!0,P);e=t.final_images[0],R(e=>[...e,...t.bgRemovedImageIds])}else e=(await generateSingleAIImage(E,"regenerate",p[j])).url;let t=await fetch(e),r=await t.blob();await new Promise(e=>{let t=new FileReader;t.onloadend=()=>e(t.result),t.readAsDataURL(r)}),m(e=>e.map((e,t)=>t===j?newImage:e)),z.current.closeModal()},ey=async()=>{O(!0);try{let r=e.id,a=t.background_music_selection.genre+t.background_music_selection.instrumentation+t.background_music_selection.tempo,i=t.narration_script.map(e=>e.image_script);await g(W,U,F,r,a,60,32,"yellow",i,p),T.current.closeModal(),J.push(`/video/${e.id}`)}catch(e){console.error("Error finalizing review:",e)}finally{O(!1)}};return Z?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75 z-50",children:(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto mt-6",children:[(0,a.jsxs)("p",{className:"text-center mb-2 text-white",children:["Uploading: ",ec.toFixed(2),"%"]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${ec}%`}})})]})}):(0,a.jsxs)("main",{className:"flex-1 flex flex-col items-center p-24",children:[(0,a.jsxs)("div",{className:"w-full max-w-8xl pt-10",children:[a.jsx("div",{className:"flex justify-center pb-10",children:a.jsx(d.default,{src:"/images/arcticons_form.svg",width:82,height:82,alt:"form icon"})}),a.jsx("div",{className:"flex flex-row mx-24 w-full",children:a.jsx(d.default,{src:"/images/reviewPage/timeline.svg",width:1300,height:40,alt:"timeline icon"})}),(0,a.jsxs)("div",{className:"flex flex-row mt-4 mb-10 gap-x-20",children:[a.jsx(d.default,{src:"/images/reviewPage/image.svg",width:37,height:37,alt:"image icon"}),a.jsx(s.Z5,{onDragEnd:e=>{if(!e.destination)return;let t=[...c],r=[..._],[a]=t.splice(e.source.index,1),[i]=r.splice(e.source.index,1);t.splice(e.destination.index,0,a),r.splice(e.destination.index,0,i),m(t),w(r);let n=[...v],[s]=n.splice(e.source.index,1);n.splice(e.destination.index,0,s),y(n)},children:a.jsx(l.Z,{droppableId:"droppable",children:e=>(0,a.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"flex overflow-x-auto",children:[c?.map((e,t)=>a.jsx(s._l,{draggableId:`${t}`,index:t,children:(r,i)=>a.jsxs("div",{ref:r.innerRef,...r.draggableProps,...r.dragHandleProps,className:"flex-none m-2 relative group",onClick:e=>{e.preventDefault(),i.isDragging||eb(t)},children:[a.jsx("img",{src:e,alt:`Image ${t+1}`,className:`h-40 w-60 object-cover group-hover:opacity-60 ${_[t]?"opacity-50":""}`}),a.jsx("button",{onClick:e=>{e.stopPropagation(),ep(t)},className:"absolute top-0 right-0 hidden group-hover:block bg-red-500 text-white p-1 rounded-full",children:"✕"}),_[t]&&a.jsx("div",{className:"absolute bottom-0 right-0 p-1 bg-green-500 rounded-full",children:"✔"})]})},t)),e.placeholder]})})})]}),(0,a.jsxs)("div",{className:"flex flex-row w-full mt-4 mb-12",children:[a.jsx(d.default,{src:"/images/reviewPage/mic.svg",width:40,height:40,alt:"mic icon",className:"mr-20"}),(0,a.jsxs)("div",{className:"w-full",children:[a.jsx("div",{children:a.jsx("textarea",{name:"dubbingScript",value:F,onChange:eh,className:"p-2 border border-gray-300 rounded-xl w-full mr-5 resize-none",placeholder:"Enter dubbing script here...",rows:9})}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("select",{name:"selectedVoice",value:U,onChange:e=>{let t=e.target.value;D(t);let r="";switch(t){case"alloy":r="/voices/alloy.mp3";break;case"echo":r="/voices/echo.mp3";break;case"fable":r="/voices/fable.mp3";break;case"nova":r="/voices/nova.mp3";break;case"onyx":r="/voices/onyx.mp3";break;case"shimmer":r="/voices/shimmer.mp3";break;default:r=""}B(r),G.current&&r&&(G.current.load(),G.current.play())},className:"p-2 border border-gray-300 rounded-xl my-3 mr-2 w-[250px]",children:[a.jsx("option",{value:"",children:"Select a voice"}),a.jsx("option",{value:"alloy",children:"Alloy"}),a.jsx("option",{value:"echo",children:"Echo"}),a.jsx("option",{value:"fable",children:"Fable"}),a.jsx("option",{value:"nova",children:"Nova"}),a.jsx("option",{value:"onyx",children:"Onyx"}),a.jsx("option",{value:"shimmer",children:"Shimmer"})]}),""!==U&&(0,a.jsxs)("audio",{controls:!0,className:"w-[400px] mr-5",ref:G,children:[a.jsx("source",{src:L,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-row w-fit mt-4 mb-12",children:[a.jsx(d.default,{src:"/images/reviewPage/text.svg",width:40,height:40,alt:"text icon",className:"mr-20"}),a.jsx("select",{value:eo,onChange:e=>{el(e.target.value),e.target.style="color: transparent"},className:"p-2 border border-gray-300 rounded-xl mr-5",style:{backgroundColor:eo},placeholder:"Color",children:en.map((e,t)=>a.jsx("option",{value:e,children:e},t))}),a.jsx("input",{type:"text",name:"color",value:K,placeholder:"Color",onChange:eh,className:"p-2 border border-gray-300 rounded-xl w-full mr-5"}),a.jsx("input",{type:"number",name:"size",placeholder:"Size",value:et,onChange:eh,className:"p-2 border border-gray-300 rounded-xl w-full mr-5"})]}),(0,a.jsxs)("div",{className:"flex flex-row w-fit mt-4 mb-1",children:[a.jsx(d.default,{src:"/images/reviewPage/music.svg",width:40,height:40,alt:"music icon",className:"mr-20"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex flex-row",children:[a.jsx("input",{type:"text",className:"p-2 border border-gray-300 rounded-xl w-64 mr-2",placeholder:"Search for music",onChange:eh}),a.jsx("button",{onClick:()=>{Y(!0),setTimeout(()=>{console.log("Data loading..."),Y(!1),$.current.showModal()},2e3)},className:"py-1 px-5 rounded-xl border border-gray-300 text-white bg-[#FF6C6C] active:bg-[#CC0000]",children:"Search"})]}),""!==S&&(0,a.jsxs)("div",{className:"relative ml-3 text-black bg-white py-2 px-4 rounded-2xl max-w-fit",children:[a.jsx("button",{className:"absolute top-0 -right-1 bg-red-500 rounded-full w-4 h-4 leading-4",onClick:()=>A(""),children:"x"}),a.jsx("span",{children:S})]})]})]}),a.jsx("div",{className:"flex justify-end mt-4",children:a.jsx("button",{onClick:()=>T.current.showModal(),className:`p-2 rounded text-white px-8 ${_.every(e=>e)?"bg-[#4F4CDB]":"bg-gray-500 cursor-not-allowed"}`,children:"Complete"})})]}),(0,a.jsxs)(o.Z,{ref:T,onCancel:()=>T.current.closeModal(),title:"Final Submit",outerClassName:"bg-white",titleClassName:"text-black",children:[a.jsx("p",{className:"text-black",children:"You will be charged after this point and cannot revert your action. Do you want to proceed with this information?"}),a.jsx("button",{onClick:ey,className:"mt-2 p-2 rounded bg-green-500",children:"Final Confirm"})]}),a.jsx(o.Z,{ref:z,title:"Image Preview",onConfirm:ex,onCancel:()=>z.current.closeModal(),children:(0,a.jsxs)("div",{className:"flex flex-col items-center w-[400px]",children:[(0,a.jsxs)("div",{className:"flex mb-4",children:[a.jsx("div",{className:"flex-1 mr-2",children:a.jsx("img",{src:c[j],alt:"Large Preview"})}),a.jsx("textarea",{value:E,onChange:e=>H(e.target.value),placeholder:"Create your own script for image generation.",className:"p-2 border border-[#949494] rounded-lg resize-none min-h-[100px] flex-1",rows:4})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[a.jsx("button",{onClick:ev,className:"p-2 bg-yellow-500 rounded text-white",children:"Regenerate"}),a.jsx("button",{onClick:ex,className:`p-2 rounded text-white ${_[j]?"bg-red-500":"bg-green-500"}`,children:_[j]?"Unconfirm":"Confirm"})]})]})}),a.jsx(o.Z,{ref:$,isLoading:X,title:"Music",onConfirm:()=>{},onCancel:()=>$.current.closeModal(),children:a.jsx("div",{className:"flex flex-col items-center w-[800px]",children:a.jsx("div",{className:"flex flex-col w-full h-[250px] overflow-y-auto",children:(0,a.jsxs)("table",{className:"text-[#DEDEDE]",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b-2 border-[#616161]",children:[a.jsx("th",{}),a.jsx("th",{className:"text-left",children:"Title"}),a.jsx("th",{className:"text-left",children:"Genre"}),a.jsx("th",{className:"text-left",children:"Mood"}),a.jsx("th",{className:"text-left",children:"Artist"})]})}),a.jsx("tbody",{children:C.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b-2 border-[#616161] cursor-pointer hover:opacity-60",children:[a.jsx("td",{className:"py-2",children:a.jsx("img",{src:"/images/play_button.svg",width:25,height:25,alt:"play_button icon",onClick:()=>ef(e)})}),a.jsx("td",{className:"py-2",children:e.title}),a.jsx("td",{className:"py-2",children:e.genre}),a.jsx("td",{className:"py-2",children:e.mood}),a.jsx("td",{className:"py-2",children:e.artist})]},t))})]})})})})]})}},1324:(e,t,r)=>{"use strict";r.d(t,{N_:()=>n,Ef:()=>s});var a=r(4470),i=r(6562);async function n(e,t,r){let a=i.Z.get("auth-token");console.log(a);try{let t={number_of_product_images:r.length.toString(),title:e.title,product_description:e.product_description,video_description:e.video_description,dimension:`${e.length}x${e.width}x${e.height} inches`},i=await fetch("http://localhost:8000/text/generate-script",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)});if(!i.ok)throw Error(`Failed to get backend script data: ${i.statusText}`);return await i.json()}catch(e){throw console.error("Error adding review:",e),Error("Failed to add review")}}(0,r(5815).eI)("https://zaumlpbkxvjttejnxkur.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InphdW1scGJreHZqdHRlam54a3VyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTk4MTY0NTcsImV4cCI6MjAzNTM5MjQ1N30.WZNW5M-NHQMKQAUIwxBn4wmsm5ddi2odHopgiXtFUxw");let s=async e=>{let t={user_id:e.sub,role:e.role,exp:e.exp,iat:e.iat,session_id:e.session_id};try{let e=new TextEncoder().encode("dWWOvdGJYdR6CdmhxndBfJHYN/3//ybrWY5FiMf09M+0w/gXvp+2w0TtFZUBhPIq4dD3xGIPmLLto6/2/L1FxA==");return await new a.N(t).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("12h").sign(e)}catch(e){return console.error("Invalid token:",e),null}}},5934:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,dynamicParams:()=>u,generateStaticParams:()=>h});var a=r(9510),i=r(8570);let n=(0,i.createProxy)(String.raw`/Users/hyungseokcho/ai-video-gen-front/src/app/review/[id]/ClientReview.jsx`),{__esModule:s,$$typeof:o}=n;n.default;let l=(0,i.createProxy)(String.raw`/Users/hyungseokcho/ai-video-gen-front/src/app/review/[id]/ClientReview.jsx#default`);(0,i.createProxy)(String.raw`/Users/hyungseokcho/ai-video-gen-front/src/app/review/[id]/ClientReview.jsx#generateStaticParams`);var c=r(6008);function d({params:e}){return a.jsx(l,{params:e})}let u=!1;async function h(){try{return(await (0,c.N6)()).map(e=>({id:e.script_id.toString()}))}catch(e){return console.error("Error fetching scripts:",e),[]}}},6008:(e,t,r)=>{"use strict";r.d(t,{N6:()=>i}),r(9491);let a=(0,r(2814).eI)("https://zaumlpbkxvjttejnxkur.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InphdW1scGJreHZqdHRlam54a3VyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTk4MTY0NTcsImV4cCI6MjAzNTM5MjQ1N30.WZNW5M-NHQMKQAUIwxBn4wmsm5ddi2odHopgiXtFUxw");async function i(){let{data:e}=await a.from("Scripts").select("script_id");return e}},3881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(6621);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,607,621,989,592,816,788],()=>r(289));module.exports=a})();