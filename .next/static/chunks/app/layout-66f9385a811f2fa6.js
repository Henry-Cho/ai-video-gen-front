(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4342:function(e,t,s){Promise.resolve().then(s.bind(s,2048))},6462:function(e,t,s){"use strict";s.d(t,{Mx:function(){return d},Ry:function(){return u},UC:function(){return c},is:function(){return x},qj:function(){return m}});var a=s(4593),r=s(7513),l=s.n(r),n=s(2649);let i=(0,a.eI)("https://zaumlpbkxvjttejnxkur.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InphdW1scGJreHZqdHRlam54a3VyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTk4MTY0NTcsImV4cCI6MjAzNTM5MjQ1N30.WZNW5M-NHQMKQAUIwxBn4wmsm5ddi2odHopgiXtFUxw");async function o(e){try{return await l().hash(e,"$2b$10$abcdefghijklmnopqrstuv")}catch(e){throw Error("Error hashing password")}}async function c(e,t,s){let a=await o(t),{data:r,error:l}=await i.auth.signUp({email:e,password:a,options:{data:{username:s}}});return(await i.from("users").insert({id:r.user.id,username:s,email:e,encrypted_password:a}),l)?(console.error("Error signing up:",l),{error:l}):{data:r}}async function u(e,t){let s=await o(t),{data:a,error:r}=await i.auth.signInWithPassword({email:e,password:s});if(r)return console.error("Error signing in:",r),{error:r};let l=a.user.id,{data:n,error:c}=await i.from("users").select("username").eq("id",l).single();return c?(console.error("Error fetching user info:",c),{error:c}):(a.user.user_metadata={username:n.username},{data:a})}async function d(){let{error:e}=await i.auth.signOut();return e?(console.error("Error signing out:",e),{error:e}):(n.Z.remove("auth-token"),{message:"Successfully signed out"})}async function m(){let{data:e,error:t}=await i.auth.signInWithOAuth({provider:"google"});return t?(console.error("Error signing in with Google:",t),{error:t}):(document.cookie="loggedIn=true; path=/",{data:e})}async function x(){let{data:e,error:t}=await i.auth.getUser();return t?(console.error("Error getting user data:",t),{error:t}):(await i.from("users").insert({id:e.user.id,username:e.user.user_metadata.name,email:e.user.email}),{data:e})}},3423:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437);function r(){return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsxs)("div",{className:"relative w-10 h-10",children:[(0,a.jsx)("div",{className:"absolute w-full h-full rounded-full bg-blue-500 opacity-60 animate-ping"}),(0,a.jsx)("div",{className:"absolute w-full h-full rounded-full bg-blue-500 opacity-60 animate-ping animation-delay-1000"})]})})}s(2265)},2048:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(7437),r=s(4041),l=s.n(r),n=s(2265),i=s(8827),o=s(1945),c=s(7138),u=s(6463);function d(){let[e,t]=(0,n.useState)(!1);(0,u.useRouter)();let s=()=>{t(!e)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"fixed top-0 left-0 h-full flex flex-col bg-gray-800 text-white p-4 transform ".concat(e?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out z-50"),children:[(0,a.jsx)("button",{onClick:s,className:"text-white mb-4 self-end",children:"Close"}),(0,a.jsx)("div",{className:"text-2xl font-bold mb-4",children:"Mock Logo"}),(0,a.jsxs)("form",{className:"flex items-center mb-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Main Page",className:"p-2 rounded-l-md"}),(0,a.jsx)("button",{type:"submit",className:"p-2 bg-blue-500 rounded-r-md",children:"Search"})]}),(0,a.jsx)(c.default,{href:"/storage",className:"p-2 bg-blue-500 rounded",children:"Storage"})]}),!e&&(0,a.jsx)("button",{onClick:s,className:"p-2 bg-gray-800 text-white rounded fixed top-4 left-4 z-50",children:"â˜°"})]})}var m=s(6462);function x(e){let{handleSignUpClick:t,onClose:s}=e,[r,l]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[d,x]=(0,n.useState)(""),h=(0,u.useRouter)(),{setUser:f}=(0,i.a)(),g=async()=>{let{data:e,error:t}=await (0,m.Ry)(r,o);t?x("Sign in failed: "+t.message):(document.cookie="auth-token=".concat(e.session.access_token,"; path=/"),document.cookie="refresh-token=".concat(e.session.refresh_token,"; path=/; HttpOnly;"),f(e.user),h.push("/"),s(),x("Sign in successful! Welcome back."))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Login"}),(0,a.jsxs)("p",{className:"text-gray-400 mb-4",children:["Don't have an account? ",(0,a.jsx)("a",{onClick:t,className:"text-orange-500 cursor-pointer",children:"Sign up"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white mb-2",htmlFor:"email",children:"Email"}),(0,a.jsxs)("div",{className:"flex items-center bg-gray-700 rounded",children:[(0,a.jsx)("span",{className:"inline-block px-3 text-gray-400",children:(0,a.jsx)("i",{className:"fas fa-user"})}),(0,a.jsx)("input",{className:"w-full p-2 bg-gray-700 text-white rounded-r",type:"email",placeholder:"Email",value:r,onChange:e=>l(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white mb-2",htmlFor:"password",children:"Password"}),(0,a.jsxs)("div",{className:"flex items-center bg-gray-700 rounded",children:[(0,a.jsx)("span",{className:"inline-block px-3 text-gray-400",children:(0,a.jsx)("i",{className:"fas fa-lock"})}),(0,a.jsx)("input",{className:"w-full p-2 bg-gray-700 text-white rounded-r",type:"password",placeholder:"Password",value:o,onChange:e=>c(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("label",{className:"flex items-center text-white",children:[(0,a.jsx)("input",{type:"checkbox",className:"mr-2"})," Remember me"]}),(0,a.jsx)("a",{href:"#",className:"text-orange-500",children:"Forgot Password?"})]}),(0,a.jsx)("button",{className:"w-full py-2 text-white rounded",onClick:g,style:{background:"linear-gradient(90deg, #BF4212, #FFB193)",border:"none",cursor:"pointer"},children:"Login"}),d&&(0,a.jsx)("p",{className:"text-white m-1 mt-3",children:d}),(0,a.jsxs)("div",{className:"text-center text-white mt-4",children:[(0,a.jsx)("button",{className:"bg-blue-500 text-white p-2 m-1 mt-2 rounded-md",onClick:m.qj,children:"Sign in with Google"}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4 mt-2",children:[(0,a.jsx)("a",{href:"#",className:"text-white",children:(0,a.jsx)("i",{className:"fab fa-facebook"})}),(0,a.jsx)("a",{href:"#",className:"text-white",children:(0,a.jsx)("i",{className:"fab fa-google"})}),(0,a.jsx)("a",{href:"#",className:"text-white",children:(0,a.jsx)("i",{className:"fab fa-twitter"})})]})]})]})}function h(e){let{isOpen:t,onClose:s,children:r}=e;return((0,n.useEffect)(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[t]),t)?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,a.jsxs)("div",{className:"relative p-6 rounded-lg shadow-lg",style:{border:"2px solid #0ff",boxShadow:"0 0 5px #0ff, 0 0 10px #0ff, 0 0 15px #0ff, 0 0 20px #0ff",width:"400px",backgroundColor:"rgba(34, 34, 34, 0.5)",backdropFilter:"blur(10px)",borderRadius:"20px"},children:[(0,a.jsx)("button",{className:"absolute top-0 right-0 mt-4 mr-4 text-white hover:text-gray-300",onClick:s,children:"X"}),r]})}):null}function f(e){let{handleSignInClick:t}=e,[s,r]=(0,n.useState)(""),[l,i]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[u,d]=(0,n.useState)(""),x=async()=>{let{data:e,error:a}=await (0,m.UC)(s,l,o);a?d("Sign up failed: "+a.message):(t(),d("Sign up successful! Please check your email to confirm your account."))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Sign Up"}),(0,a.jsxs)("p",{className:"text-gray-400 mb-4",children:["Already have an account? ",(0,a.jsx)("a",{onClick:t,className:"text-orange-500 cursor-pointer",children:"Login"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white mb-2",htmlFor:"name",children:"Name"}),(0,a.jsxs)("div",{className:"flex items-center bg-gray-700 rounded",children:[(0,a.jsx)("span",{className:"inline-block px-3 text-gray-400",children:(0,a.jsx)("i",{className:"fas fa-user"})}),(0,a.jsx)("input",{className:"w-full p-2 bg-gray-700 text-white rounded-r",type:"text",placeholder:"User Name",value:o,onChange:e=>c(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white mb-2",htmlFor:"email",children:"Email"}),(0,a.jsxs)("div",{className:"flex items-center bg-gray-700 rounded",children:[(0,a.jsx)("span",{className:"inline-block px-3 text-gray-400",children:(0,a.jsx)("i",{className:"fas fa-envelope"})}),(0,a.jsx)("input",{className:"w-full p-2 bg-gray-700 text-white rounded-r",type:"email",placeholder:"Email",value:s,onChange:e=>r(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white mb-2",htmlFor:"password",children:"Password"}),(0,a.jsxs)("div",{className:"flex items-center bg-gray-700 rounded",children:[(0,a.jsx)("span",{className:"inline-block px-3 text-gray-400",children:(0,a.jsx)("i",{className:"fas fa-lock"})}),(0,a.jsx)("input",{className:"w-full p-2 bg-gray-700 text-white rounded-r",type:"password",placeholder:"Password",value:l,onChange:e=>i(e.target.value)})]})]}),(0,a.jsx)("button",{className:"w-full py-2 text-white rounded",onClick:x,style:{background:"linear-gradient(90deg, #BF4212, #FFB193)",border:"none",cursor:"pointer"},children:"Sign Up"}),u&&(0,a.jsx)("p",{className:"text-white",children:u})]})}function g(e){let{isOpen:t,onClose:s,children:r}=e;return((0,n.useEffect)(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[t]),t)?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,a.jsxs)("div",{className:"relative p-6 rounded-lg shadow-lg",style:{border:"2px solid #0ff",boxShadow:"0 0 5px #0ff, 0 0 10px #0ff, 0 0 15px #0ff, 0 0 20px #0ff",width:"400px",backgroundColor:"rgba(34, 34, 34, 0.5)",backdropFilter:"blur(10px)",borderRadius:"20px"},children:[(0,a.jsx)("button",{className:"absolute top-0 right-0 mt-4 mr-4 text-white hover:text-gray-300",onClick:s,children:"X"}),r]})}):null}var p=function(e){var t;let{user:s,signOut:r,onClose:l,onRemoveProfileImage:i}=e,o=((null==s?void 0:s.user_metadata)||(null==s?void 0:null===(t=s.payload)||void 0===t?void 0:t.user_metadata)||{}).username||"User",[c,u]=(0,n.useState)(null),[d,m]=(0,n.useState)(!1);return(0,n.useRef)(null),(0,n.useEffect)(()=>{let e=localStorage.getItem("profileImage");e&&u(e)},[]),(0,a.jsxs)("div",{className:"absolute top-16 right-5 mr-10 mt-4 z-50 bg-gray-800 text-white shadow-lg rounded-lg p-5",children:[(0,a.jsx)("button",{className:"absolute top-2 right-4 text-gray-200 hover:text-gray-400",onClick:l,children:"\xd7"}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center relative",children:[(0,a.jsxs)("div",{className:"relative mt-4 flex items-center justify-center w-16 h-16 bg-gray-500 rounded-full text-white text-2xl cursor-pointer hover:bg-gray-600 hover:shadow-lg transition-transform transform hover:scale-110",tabIndex:"0",onFocus:()=>{m(!0)},onBlur:()=>{setTimeout(()=>m(!1),200)},children:[c?(0,a.jsx)("img",{src:c,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):o.charAt(0).toUpperCase(),d&&(0,a.jsxs)("div",{className:"absolute flex space-x-14 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:[(0,a.jsx)("label",{htmlFor:"profileImageUpload",className:"block py-1 px-4 bg-blue-500 text-white text-xs rounded-full cursor-pointer hover:bg-blue-600",children:"Change"}),(0,a.jsx)("button",{className:"block py-1 px-4 bg-red-500 text-white text-xs rounded-full hover:bg-red-600",onClick:()=>{u(null),localStorage.removeItem("profileImage"),i()},children:"Remove"})]})]}),(0,a.jsx)("input",{id:"profileImageUpload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=()=>{let t=e.result;u(t),localStorage.setItem("profileImage",t)},e.readAsDataURL(t)}}}),(0,a.jsxs)("h2",{className:"mt-3 text-lg",children:["Hi, ",o,"!"]})]}),(0,a.jsx)("button",{className:"mt-4 w-full py-2 px-4 text-sm text-blue-400 border border-white rounded-full hover:bg-gradient-to-r hover:from-purple-500 hover:to-blue-500 hover:text-white hover:shadow-xl transition-all duration-300",onClick:()=>{},children:"Manage your Account"}),(0,a.jsx)("button",{className:"mt-2 w-full py-2 px-4 text-sm text-red-400 bg-gray-950 rounded-full hover:bg-gradient-to-r hover:from-red-500 hover:to-red-700 hover:text-white hover:shadow-xl transition-all duration-300",onClick:()=>{r(),l()},children:"Sign out"})]})};s(3054);var b=s(337);function j(e){let{children:t}=e,[s,r]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[m,j]=(0,n.useState)(!1),[w,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=localStorage.getItem("profileImage");e&&v(e)},[]);let N=()=>{r(!0),u(!1)},y=()=>{u(!0),r(!1)},k=()=>{r(!1)},C=()=>{u(!1)},S=()=>{j(!m)},I=()=>{j(!1)},F=()=>{v(null)};return(0,a.jsx)("html",{lang:"en",className:"h-full",children:(0,a.jsx)("body",{className:"bg-custom-gradient ".concat(l().className," h-full flex flex-col"),children:(0,a.jsx)(i.H,{children:(0,a.jsx)(o.d,{children:(0,a.jsx)(function(e){var t;let{children:r}=e,{user:l,loading:o,signOut:u}=(0,i.a)();if(o)return(0,a.jsx)(b.Z,{});let j=(((null==l?void 0:l.user_metadata)||(null==l?void 0:null===(t=l.payload)||void 0===t?void 0:t.user_metadata)||{}).username||"User").charAt(0).toUpperCase();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)(b.Z,{}),children:(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:[m&&(0,a.jsx)(p,{user:l,signOut:u,onClose:I,onRemoveProfileImage:F}),(0,a.jsx)("div",{className:"absolute top-5 right-5 mr-5 z-50 flex items-center space-x-4",children:l?(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-500 rounded-full text-white cursor-pointer transition-transform transform hover:scale-110 hover:shadow-lg hover:bg-gray-600",onClick:S,children:w?(0,a.jsx)("img",{src:w,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):j}):(0,a.jsx)("button",{className:"rounded-lg py-2 px-4 text-white bg-gradient-to-r from-[#3F46FF] to-[#EB3333]",onClick:N,children:"Sign In"})}),(0,a.jsx)(h,{isOpen:s,onClose:k,children:(0,a.jsx)(x,{handleSignUpClick:y,onClose:k})}),(0,a.jsx)(g,{isOpen:c,onClose:C,children:(0,a.jsx)(f,{handleSignInClick:N,onClose:C})}),(0,a.jsx)(d,{}),r]})})})},{children:t})})})})})}},337:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437),r=s(3423);function l(){return(0,a.jsx)(r.Z,{})}},8827:function(e,t,s){"use strict";s.d(t,{H:function(){return o},a:function(){return c}});var a=s(7437),r=s(6462),l=s(6463),n=s(2265);let i=(0,n.createContext)(),o=e=>{let{children:t}=e,[s,o]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0),d=(0,l.useRouter)(),m=(0,l.usePathname)();(0,n.useEffect)(()=>{(async()=>{let e=window.location.pathname,t=await fetch("/api/auth/session?pathname=".concat(e)),s=await t.json();if(s.user)o(s.user);else{let t=await fetch("/api/auth/refresh?pathname=".concat(e));t.ok?o((await t.json()).user):"/"!==e&&d.push("/")}u(!1)})()},[d,m]);let x=async()=>{let{error:e}=await (0,r.Mx)();e||(o(null),d.push("/"))},h=async(e,t)=>{let{data:s,error:a}=await signInWithEmail(e,t);a||o(s.user)},f=async(e,t,s)=>{let{data:a,error:r}=await signUpNewUser(e,t,s);r||o(a.user)};return(0,a.jsx)(i.Provider,{value:{user:s,loading:c,setUser:o,signOut:x,signIn:h,signUp:f},children:t})},c=()=>(0,n.useContext)(i)},1945:function(e,t,s){"use strict";s.d(t,{d:function(){return n},v:function(){return i}});var a=s(7437),r=s(2265);let l=(0,r.createContext)(),n=e=>{let{children:t}=e,[s,n]=(0,r.useState)(null),[i,o]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,m]=(0,r.useState)(!1);return(0,a.jsx)(l.Provider,{value:{userId:s,imageIds:i,noBgImageIds:c,hasProductIndexes:d,setUserId:n,setImageIds:o,setNoBgImageIds:u,setHasProductIndexes:m},children:t})},i=()=>(0,r.useContext)(l)},3054:function(){}},function(e){e.O(0,[841,218,90,892,971,23,744],function(){return e(e.s=4342)}),_N_E=e.O()}]);